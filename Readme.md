
# üåê Mini-Cache TTL ‚Äî –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –ø–∞–∫–µ—Ç–∞ `mini-cache-ttl`( [`npm`](https://www.npmjs.com/package/mini-cache-ttl) ) | ([`git`](https://github.com/O9nix/mini-cache-ttl/tree/feature/server-client) )–≤ —Ä–µ–∂–∏–º–µ:

- **–õ–æ–∫–∞–ª—å–Ω–æ–≥–æ in-memory –∫—ç—à–∞** (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞)
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –∫—ç—à–∞** (–æ–±—â–∏–π –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤)

–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –≥–∏–±—Ä–∏–¥–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:  
> ¬´–ë—ã—Å—Ç—Ä–æ –ª–æ–∫–∞–ª—å–Ω–æ + —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ¬ª.

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
mini-cache-demo
‚îú‚îÄ cache-server
‚îÇ  ‚îú‚îÄ package-lock.json
‚îÇ  ‚îú‚îÄ package.json
‚îÇ  ‚îî‚îÄ server.js
‚îú‚îÄ Readme.md
‚îú‚îÄ server-a
‚îÇ  ‚îú‚îÄ app.js
‚îÇ  ‚îú‚îÄ package-lock.json
‚îÇ  ‚îú‚îÄ package.json
‚îÇ  ‚îî‚îÄ public
‚îÇ     ‚îî‚îÄ index.html
‚îú‚îÄ server-b
‚îÇ  ‚îú‚îÄ app.js
‚îÇ  ‚îú‚îÄ package-lock.json
‚îÇ  ‚îú‚îÄ package.json
‚îÇ  ‚îî‚îÄ public
‚îÇ     ‚îî‚îÄ index.html
‚îî‚îÄ test-cache
   ‚îú‚îÄ package-lock.json
   ‚îú‚îÄ package.json
   ‚îú‚îÄ test-local.mjs
   ‚îî‚îÄ test-remote.mjs
```
- **–û–±—â–∏–π –∫—ç—à**: `http://localhost:4000` ‚Üí —Ö—Ä–∞–Ω–∏–ª–∏—â–µ `shared-data`
- **–°–µ—Ä–≤–∏—Å A**: `http://localhost:3001`
- **–°–µ—Ä–≤–∏—Å B**: `http://localhost:3002`

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–æ –≤—Å–µ—Ö –ø–∞–ø–∫–∞—Ö:
   ```bash
   # –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
   npm install --prefix cache-server
   npm install --prefix server-a
   npm install --prefix server-b
   npm install --prefix test-cache
   ```

2. –ó–∞–ø—É—Å—Ç–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ —Ç—Ä—ë—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö:

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: –æ–±—â–∏–π –∫—ç—à
npm start --prefix cache-server

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: —Å–µ—Ä–≤–∏—Å A
node server-a/app.js

# –¢–µ—Ä–º–∏–Ω–∞–ª 3: —Å–µ—Ä–≤–∏—Å B
node server-b/app.js
```

3. –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
http://localhost:3001 ‚Üí –°–µ—Ä–≤–∏—Å A
http://localhost:3002 ‚Üí –°–µ—Ä–≤–∏—Å B

4. –ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

## –í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫—ç—à–µ (–≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º —Å–µ—Ä–≤–∏—Å–µ)

‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ –≤ –æ–±—â–µ–º –∫—ç—à–µ (–≤–∏–¥–Ω—ã –≤ –æ–±–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö)

‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π

‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å TTL (–≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏)

## –ß–µ—Ä–µ–∑ API (–ø—Ä–∏–º–µ—Ä—ã):

```bash
# –ó–∞–ø–∏—Å—å –≤ –æ–±—â–∏–π –∫—ç—à –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
curl -X POST http://localhost:3001/shared/message \
  -H "Content-Type: application/json" \
  -d '{"value":"–ü—Ä–∏–≤–µ—Ç –∏–∑ CLI!", "ttl":60}'

# –ß—Ç–µ–Ω–∏–µ –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
curl http://localhost:3002/shared/message
```


# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ API

–ü–∞–∫–µ—Ç ```mini-cache-ttl``` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã:
get, set, update, del, rename
keys, size, clear
touch, has
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Ö –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã:

```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à
node test-cache/test-local.mjs

# –£–¥–∞–ª—ë–Ω–Ω—ã–π –∫—ç—à (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—â–µ–Ω–Ω—ã–π cache-server)
node test-cache/test-remote.mjs
```